(this["webpackJsonpnaihua-line-login"]=this["webpackJsonpnaihua-line-login"]||[]).push([[0],{189:function(e,t){},192:function(e,t){},194:function(e,t){},209:function(e,t){},211:function(e,t){},239:function(e,t){},241:function(e,t){},242:function(e,t){},247:function(e,t){},249:function(e,t){},255:function(e,t){},257:function(e,t){},276:function(e,t){},288:function(e,t){},291:function(e,t){},316:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),i=n(146),a=n.n(i),s=n(151),l=n(6),r=n(15),u=n.n(r),d=n(32),f=n.n(d),h=n(73),j=n.n(h),p=n(147),b=n.n(p),g=n(148),O=n.n(g),m=n(1),x=function(){var e=u()(32).toString("hex"),t=u()(32).toString("hex");Object(c.useEffect)((function(){var n=j.a.parse(window.location.href,!0).query;0===Object.keys(n).length&&function(){var n="https://access.line.me/oauth2/v2.1/authorize?";n+="response_type=code",n+="&client_id=".concat("1656692096"),n+="&redirect_uri=".concat("https://chennalhua.github.io/lineLogin/"),n+="&state=".concat(e),n+="&nonce=".concat(t),n+="&scope=openid%20profile",n+="&bot_prompt=normal",window.location.href=n}()}));return Object(c.useEffect)((function(){!function(e){var t=j.a.parse(e,!0).query;if(Object.prototype.hasOwnProperty.call(t,"code")){var n={grant_type:"authorization_code",code:t.code,redirect_uri:"".concat("https://chennalhua.github.io/lineLogin/"),client_id:"".concat("1656692096"),client_secret:"".concat("8664461fb88612dbf7ab59d5721aea3a")};f.a.post("https://api.line.me/oauth2/v2.1/token",b.a.stringify(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){try{var t=O.a.verify(e.data.id_token,"".concat("8664461fb88612dbf7ab59d5721aea3a"),{algorithms:["HS256"],audience:"".concat("1656692096").toString(),issuer:"https://access.line.me"});document.cookie="lineIdToken=".concat(t.sub,";");var n=document.cookie.replace(/(?:(?:^|.*;\s*)cookieId\s*=\s*([^;]*).*$)|^.*$/,"$1");setTimeout((function(){window.location.href="https://chennalhua.github.io/lineLogin/#/page?id=".concat(n)}),1e3)}catch(c){console.log(c)}})).catch((function(e){console.log(e)}))}else t.error&&alert("\u9700\u300c\u8a31\u53ef\u300d\u6388\u6b0a\uff0c\u624d\u80fd\u9a57\u8b49\u767b\u5165")}(window.location.href)}),[]),Object(m.jsx)("div",{children:"\u9801\u9762\u5c0e\u56de\u4e2d..."})},w=n(18),v=function(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)lineIdToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),t=document.cookie.replace(/(?:(?:^|.*;\s*)cookieId\s*=\s*([^;]*).*$)|^.*$/,"$1"),n=Object(c.useState)({name:null,id:null}),o=Object(w.a)(n,2),i=o[0],a=o[1],s=Object(c.useState)(null),l=Object(w.a)(s,2),r=l[0],u=l[1],d=[{id:"001",name:"\u65b0\u5e74\u5feb\u6a02"}];Object(c.useEffect)((function(){var n=window.location.href,c=new URL(n).hash.split("#")[1].split("?")[1].split("=")[1];sessionStorage.setItem("sessionCaseId",c),localStorage.setItem("localCaseId",c),document.cookie="cookieId=".concat(c,";"),""!==e&&null!==e&&void 0!==e?null!=c&&"null"!=c&&""!=c&&void 0!=c?d.map((function(e,n){t==e.id&&a({name:e.name,id:e.id})})):u("\u6293 ID \u932f\u8aa4 !!"):setTimeout((function(){window.location.href="https://chennalhua.github.io/lineLogin/#/"}),3e3)}),[]),Object(c.useEffect)((function(){}),[r]),Object(c.useEffect)((function(){}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{style:{style:{position:"absolute",top:"35%",left:"50%",transform:"translate(-50%, -50%)",width:"100%"}},children:[Object(m.jsx)("p",{children:window.location.href}),Object(m.jsxs)("ul",{style:{fontSize:"18px"},children:[Object(m.jsxs)("li",{children:["cookies\uff1a",t]}),Object(m.jsxs)("li",{children:["localStorage\uff1a",localStorage.getItem("localCaseId")]}),Object(m.jsxs)("li",{children:["sessionStorage\uff1a",sessionStorage.getItem("sessionCaseId")]})]}),Object(m.jsx)("div",{style:{textAlign:"center",fontSize:"20px"},children:r}),Object(m.jsx)("div",{style:{textAlign:"center",fontSize:"20px"},children:i.name})]})})},y=function(e){return Object(m.jsxs)(s.a,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",children:Object(m.jsx)(x,{})})," ",Object(m.jsx)(l.a,{exact:!0,path:"/page",children:Object(m.jsx)(v,{})})," "]})},S=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(y,{})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(S,{})}),document.getElementById("root")),k()}},[[316,1,2]]]);
//# sourceMappingURL=main.9dcaf2a1.chunk.js.map