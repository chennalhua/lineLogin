(this["webpackJsonpnaihua-line-login"]=this["webpackJsonpnaihua-line-login"]||[]).push([[0],{189:function(e,t){},192:function(e,t){},194:function(e,t){},209:function(e,t){},211:function(e,t){},239:function(e,t){},241:function(e,t){},242:function(e,t){},247:function(e,t){},249:function(e,t){},255:function(e,t){},257:function(e,t){},276:function(e,t){},288:function(e,t){},291:function(e,t){},316:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),i=n(146),a=n.n(i),s=n(151),l=n(6),r=n(15),u=n.n(r),d=n(32),f=n.n(d),j=n(73),h=n.n(j),b=n(147),p=n.n(b),O=n(148),x=n.n(O),m=n(1),g=function(){var e=u()(32).toString("hex"),t=u()(32).toString("hex");Object(c.useEffect)((function(){var n=h.a.parse(window.location.href,!0).query;0===Object.keys(n).length&&function(){var n="https://access.line.me/oauth2/v2.1/authorize?";n+="response_type=code",n+="&client_id=".concat("1656692096"),n+="&redirect_uri=".concat("https://chennalhua.github.io/lineLogin/"),n+="&state=".concat(e),n+="&nonce=".concat(t),n+="&scope=openid%20profile",n+="&bot_prompt=normal",window.location.href=n}()}));return Object(c.useEffect)((function(){!function(e){var t=h.a.parse(e,!0).query;if(Object.prototype.hasOwnProperty.call(t,"code")){var n={grant_type:"authorization_code",code:t.code,redirect_uri:"".concat("https://chennalhua.github.io/lineLogin/"),client_id:"".concat("1656692096"),client_secret:"".concat("8664461fb88612dbf7ab59d5721aea3a")};f.a.post("https://api.line.me/oauth2/v2.1/token",p.a.stringify(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){try{var t=x.a.verify(e.data.id_token,"".concat("8664461fb88612dbf7ab59d5721aea3a"),{algorithms:["HS256"],audience:"".concat("1656692096").toString(),issuer:"https://access.line.me"});document.cookie="lineIdToken=".concat(t.sub,";");var n=document.cookie.replace(/(?:(?:^|.*;\s*)cookieId\s*=\s*([^;]*).*$)|^.*$/,"$1");setTimeout((function(){window.location.href="/#/page?id=".concat(n)}),1e3)}catch(c){console.log(c)}})).catch((function(e){console.log(e)}))}else t.error&&alert("\u9700\u300c\u8a31\u53ef\u300d\u6388\u6b0a\uff0c\u624d\u80fd\u9a57\u8b49\u767b\u5165")}(window.location.href)}),[]),Object(m.jsx)("div",{children:"\u9801\u9762\u5c0e\u56de\u4e2d..."})},v=n(18),w=function(){var e=Object(c.useState)(!0),t=Object(v.a)(e,2),n=(t[0],t[1]),o=Object(c.useState)([]),i=Object(v.a)(o,2),a=i[0],s=i[1];Object(c.useEffect)((function(){f.a.get("/api/Gcd/loc=").then((function(e){console.log(e.data),"-1"==e.data.ResponseCode&&console.log("-1"),s(e.data),n(!1)})).catch((function(e){console.log(e)}))}),[]);var l=[];a.forEach((function(e,t){l.push(e.location)}));var r=l.filter((function(e,t,n){return n.indexOf(e)===t})),u=Object(c.useState)("\u7e3d\u516c\u53f8"),d=Object(v.a)(u,2),j=d[0],h=d[1],b=Object(c.useState)("\u8463\u4e8b\u9577\u5ba4"),p=Object(v.a)(b,2),O=p[0],x=p[1],g=[];!function(e){e.forEach((function(e,t){j===e.location&&g.push(e.department)}))}(a);var w=g.filter((function(e,t,n){return n.indexOf(e)===t}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"container mt-3",children:[Object(m.jsxs)("div",{className:"d-flex pb-2",children:[Object(m.jsx)("select",{className:"form-select",value:j,onChange:function(e){var t=e.target.value;h(t),a.map((function(e){return t===e.location&&x(e.department),!0}))},children:r.map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},e)}))}),Object(m.jsx)("select",{className:"form-select ms-2",value:O,onChange:function(e){var t=e.target.value;x(t)},children:w.map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},e)}))})]}),Object(m.jsx)("ul",{className:"list-unstyled page-content-link fw-bolder",value:!0,children:a.map((function(e,t){return j!==e.location||O!==e.department||Object(m.jsx)("li",{className:"border-bottom py-3",children:Object(m.jsxs)("div",{className:"d-flex justify-content-between flex-wrap",children:[Object(m.jsx)("span",{}),Object(m.jsxs)("span",{children:[""===e.extension?" - ":e.extension," /",Object(m.jsx)("a",{href:"tel:+886-".concat(e.telephone),className:"ms-2",children:e.telephone})]})]})},t)}))})]})})},S=function(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)lineIdToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),t=document.cookie.replace(/(?:(?:^|.*;\s*)cookieId\s*=\s*([^;]*).*$)|^.*$/,"$1"),n=Object(c.useState)({name:null,id:null}),o=Object(v.a)(n,2),i=o[0],a=o[1],s=Object(c.useState)(null),l=Object(v.a)(s,2),r=l[0],u=l[1],d=[{id:"001",name:"\u65b0\u5e74\u5feb\u6a02"}];Object(c.useEffect)((function(){var n=window.location.href,c=new URL(n).hash.split("#")[1].split("?")[1].split("=")[1];sessionStorage.setItem("sessionCaseId",c),localStorage.setItem("localCaseId",c),document.cookie="cookieId=".concat(c,";"),""!==e&&null!==e&&void 0!==e?null!=c&&"null"!=c&&""!=c&&void 0!=c?d.map((function(e,n){t==e.id&&a({name:e.name,id:e.id})})):u("\u6293 ID \u932f\u8aa4 !!"):setTimeout((function(){window.location.href="/login"}),3e3)}),[]),Object(c.useEffect)((function(){}),[r]),Object(c.useEffect)((function(){}),[]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{style:{style:{position:"absolute",top:"35%",left:"50%",transform:"translate(-50%, -50%)",width:"100%"}},children:[Object(m.jsx)("p",{children:window.location.href}),Object(m.jsxs)("ul",{style:{fontSize:"18px"},children:[Object(m.jsxs)("li",{children:["cookies\uff1a",t]}),Object(m.jsxs)("li",{children:["localStorage\uff1a",localStorage.getItem("localCaseId")]}),Object(m.jsxs)("li",{children:["sessionStorage\uff1a",sessionStorage.getItem("sessionCaseId")]})]}),Object(m.jsx)("div",{style:{textAlign:"center",fontSize:"20px"},children:r}),Object(m.jsx)("div",{style:{textAlign:"center",fontSize:"20px"},children:i.name})]})})},y=function(e){return Object(m.jsxs)(s.a,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",children:Object(m.jsx)(g,{})})," ",Object(m.jsx)(l.a,{exact:!0,path:"/page",children:Object(m.jsx)(S,{})})," ",Object(m.jsx)(l.a,{exact:!0,path:"/qqq",children:Object(m.jsx)(w,{})})," "]})},k=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(y,{})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),I()}},[[316,1,2]]]);
//# sourceMappingURL=main.f15d9e07.chunk.js.map